!function($){acf.fields.repeater={$el:null,o:{},set:function(e){return $.extend(this,e),this.o=acf.helpers.get_atts(this.$el),this.o.row_count=this.$el.find("> table > tbody > tr.row").length,this},init:function(){var e=this,t=this.$el;1!=this.o.max_rows&&this.$el.find("> table > tbody").unbind("sortable").sortable({items:"> tr.row",handle:"> td.order",helper:acf.helpers.sortable,forceHelperSize:!0,forcePlaceholderSize:!0,scroll:!0,start:function(e,t){$(document).trigger("acf/sortable_start",t.item),$(document).trigger("acf/sortable_start_repeater",t.item);var r=t.item.children("td").length;t.placeholder.html('<td colspan="'+r+'"></td>')},stop:function(r,o){$(document).trigger("acf/sortable_stop",o.item),$(document).trigger("acf/sortable_stop_repeater",o.item),e.set({$el:t}).render()}}),this.render()},render:function(){this.o.row_count=this.$el.find("> table > tbody > tr.row").length,this.$el.find("> table > tbody > tr.row").each(function(e){$(this).children("td.order").html(e+1)}),0==this.o.row_count?this.$el.addClass("empty"):this.$el.removeClass("empty"),this.o.row_count>=this.o.max_rows?(this.$el.addClass("disabled"),this.$el.find("> .repeater-footer .acf-button").addClass("disabled")):(this.$el.removeClass("disabled"),this.$el.find("> .repeater-footer .acf-button").removeClass("disabled"))},add:function(e){if(this.o.row_count>=this.o.max_rows)return alert(acf.l10n.repeater.max.replace("{max}",this.o.max_rows)),!1;var t=acf.helpers.uniqid(),r=this.$el.find("> table > tbody > tr.row-clone").html().replace(/(=["]*[\w-\[\]]*?)(acfcloneindex)/g,"$1"+t),o=$('<tr class="row"></tr>').append(r);e||(e=this.$el.find("> table > tbody > .row-clone")),e.before(o),this.$el.closest("tr").trigger("mouseenter"),this.render(),$(document).trigger("acf/setup_fields",o),this.$el.closest(".field").removeClass("error")},remove:function(e){var t=this;if(this.o.row_count<=this.o.min_rows)return alert(acf.l10n.repeater.min.replace("{min}",this.o.min_rows)),!1;e.addClass("acf-remove-item"),setTimeout(function(){e.remove(),t.$el.closest("tr").trigger("mouseenter"),t.render()},400)}},$(document).on("acf/setup_fields",function(e,t){$(t).find(".repeater").each(function(){acf.fields.repeater.set({$el:$(this)}).init()})}),$(document).on("click",".repeater .repeater-footer .add-row-end",function(e){e.preventDefault(),acf.fields.repeater.set({$el:$(this).closest(".repeater")}).add(!1),$(this).blur()}),$(document).on("click",".repeater td.remove .add-row-before",function(e){e.preventDefault(),acf.fields.repeater.set({$el:$(this).closest(".repeater")}).add($(this).closest("tr")),$(this).blur()}),$(document).on("click",".repeater td.remove .acf-button-remove",function(e){e.preventDefault(),acf.fields.repeater.set({$el:$(this).closest(".repeater")}).remove($(this).closest("tr")),$(this).blur()}),$(document).on("mouseenter",".repeater tr.row",function(e){var t=$(this).find("> td.remove > a.acf-button-add"),r=t.parent().height()/2+9;t.css("margin-top","-"+r+"px")}),$(document).on("acf/conditional_logic/show acf/conditional_logic/hide",function(e,t,r){t.closest("tr.row").trigger("mouseenter")})}(jQuery);